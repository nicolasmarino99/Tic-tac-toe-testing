# frozen_string_literal: true

require 'paint'
require_relative './player.rb'
require_relative './board.rb'

class Game
  def initialize
    print_title
    @player1 = create_player 'X'
    @player2 = create_player 'O'
    @board = Board.new
  end

  def play
    puts @board

    (1..9).each do |i|
      move_to_position i.odd? ? @player1 : @player2
      return true if winner? i.odd? ? @player1 : @player2
    end

    puts "I's a tie."
  end

  private

  def create_player(mark)
    print "Player '#{mark}' name: "
    name = gets.chomp
    Player.new(name, mark)
  end

  def move_to_position(player)
    position1 = player.get_position(@board.board)
    player.move(position1, @board.board)
  end

  def winner?(player)
    puts @board
    if @board.winner?(player.mark)
      puts Paint["The winner is '#{player.name}'!", :green, :bright]
      return true
    end
    false
  end

  def print_title
    puts <<-'TITLE'

    __/\\\\\\\\\\\\\\\____________________________________/\\\\\\\\\\\\\\\_____________________________________________/\\\\\\\\\\\\\\\________________________________________
     _\///////\\\/////____________________________________\///////\\\/////_____________________________________________\///////\\\/////_________________________________________
      _______\/\\\________/\\\___________________________________\/\\\________________________________________________________\/\\\______________________________________________
       _______\/\\\_______\///______/\\\\\\\\__/\\\\\\\\\\\_______\/\\\________/\\\\\\\\\________/\\\\\\\\__/\\\\\\\\\\\_______\/\\\___________/\\\\\________/\\\\\\\\____________
        _______\/\\\________/\\\___/\\\//////__\///////////________\/\\\_______\////////\\\_____/\\\//////__\///////////________\/\\\_________/\\\///\\\____/\\\/////\\\___________
         _______\/\\\_______\/\\\__/\\\_____________________________\/\\\_________/\\\\\\\\\\___/\\\_____________________________\/\\\________/\\\__\//\\\__/\\\\\\\\\\\____________
          _______\/\\\_______\/\\\_\//\\\____________________________\/\\\________/\\\/////\\\__\//\\\____________________________\/\\\_______\//\\\__/\\\__\//\\///////_____________
           _______\/\\\_______\/\\\__\///\\\\\\\\_____________________\/\\\_______\//\\\\\\\\/\\__\///\\\\\\\\_____________________\/\\\________\///\\\\\/____\//\\\\\\\\\\___________
            _______\///________\///_____\////////______________________\///_________\////////\//_____\////////______________________\///___________\/////_______\//////////____________


    TITLE
  end
end
