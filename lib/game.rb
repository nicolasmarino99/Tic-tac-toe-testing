# frozen_string_literal: true

require 'paint'
require_relative './player.rb'
require_relative './board.rb'

class Game
  def initialize
    print_title
    print 'Player 1 name: '
    player1 = gets.chomp
    print 'Player 2 name: '
    player2 = gets.chomp
    @player1 = Player.new(player1, 'X')
    @player2 = Player.new(player2, 'O')
    @board = Board.new
  end

  def play
    loop do
      puts @board

      position1 = @player1.get_position( @board.board)
      @player1.move(position1, @board.board)
      
      puts @board
      
      if @board.winner?(@player1.mark)
        puts Paint["The winner is '#{@player1.name}'!", :green, :bright]
        return
      end
      if @board.tie?
        puts "I's a tie."
        return
      end
      
      position2 = @player2.get_position( @board.board)
      @player2.move(position2, @board.board)
      if @board.winner?(@player2.mark)
        puts @board
        puts Paint["The winner is '#{@player2.name}'!", :green, :bright]
        return
      end
    end
  end

  private

  def print_title
    puts <<-'TITLE'

    __/\\\\\\\\\\\\\\\____________________________________/\\\\\\\\\\\\\\\_____________________________________________/\\\\\\\\\\\\\\\________________________________________
     _\///////\\\/////____________________________________\///////\\\/////_____________________________________________\///////\\\/////_________________________________________
      _______\/\\\________/\\\___________________________________\/\\\________________________________________________________\/\\\______________________________________________
       _______\/\\\_______\///______/\\\\\\\\__/\\\\\\\\\\\_______\/\\\________/\\\\\\\\\________/\\\\\\\\__/\\\\\\\\\\\_______\/\\\___________/\\\\\________/\\\\\\\\____________
        _______\/\\\________/\\\___/\\\//////__\///////////________\/\\\_______\////////\\\_____/\\\//////__\///////////________\/\\\_________/\\\///\\\____/\\\/////\\\___________
         _______\/\\\_______\/\\\__/\\\_____________________________\/\\\_________/\\\\\\\\\\___/\\\_____________________________\/\\\________/\\\__\//\\\__/\\\\\\\\\\\____________
          _______\/\\\_______\/\\\_\//\\\____________________________\/\\\________/\\\/////\\\__\//\\\____________________________\/\\\_______\//\\\__/\\\__\//\\///////_____________
           _______\/\\\_______\/\\\__\///\\\\\\\\_____________________\/\\\_______\//\\\\\\\\/\\__\///\\\\\\\\_____________________\/\\\________\///\\\\\/____\//\\\\\\\\\\___________
            _______\///________\///_____\////////______________________\///_________\////////\//_____\////////______________________\///___________\/////_______\//////////____________


    TITLE
  end
end
